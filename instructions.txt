Good news! You can test everything on Devnet for FREE. Here's how to handle testing without spending money on Mainnet:

Complete Devnet Testing Strategy
What Works on Devnet (FREE)
‚úÖ Your Solana Program

Deploy to Devnet for free
Test all instructions (create_private_swap, execute_swap, etc.)
Unlimited testing

‚úÖ Arcium MPC

Arcium has Devnet support
Test encrypted orders and callbacks
Free MPC computation

‚úÖ Jupiter API

Jupiter Quote API works on Devnet
Get real quotes for Devnet tokens
Test routing logic

‚úÖ Wallets & Transactions

Use Devnet SOL (free from faucet)
Create test wallets
Execute swaps with fake tokens


Setting Up Devnet Testing
Step 1: Get Free Devnet SOL
bash# Airdrop SOL to your wallet (free, unlimited)
solana airdrop 2 --url devnet

# Or use web faucet
# https://faucet.solana.com/
You can get 2 SOL every request, unlimited times.

Step 2: Use Devnet Tokens
Jupiter supports these tokens on Devnet:
typescript// Devnet Token Addresses (FREE to use)
const DEVNET_TOKENS = {
  'SOL': {
    mint: 'So11111111111111111111111111111111111111112',
    decimals: 9,
  },
  'USDC': {
    // Devnet USDC (test token)
    mint: '4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU',
    decimals: 6,
  },
  'USDT': {
    // Devnet USDT
    mint: 'EJwZgeZrdC8TXTQbQBoL6bfuAnFUUy1PVCMB4DYPzVaS',
    decimals: 6,
  },
  // Add more Devnet test tokens
};
Get free Devnet tokens:
bash# Use SPL Token Faucet for Devnet
# https://spl-token-faucet.com/?devnet
Or mint your own:
bashspl-token create-token --url devnet
spl-token create-account <TOKEN_MINT> --url devnet
spl-token mint <TOKEN_MINT> 1000000 --url devnet

Step 3: Configure Your Project for Devnet
Update Anchor.toml:
toml[provider]
cluster = "devnet"  # Changed from localnet
wallet = "~/.config/solana/id.json"

[programs.devnet]
dex = "YourProgramIDOnDevnet"

[[test.validator.clone]]  # Clone Devnet accounts for local testing
address = "JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4"  # Jupiter program

[[test.validator.clone]]
address = "4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU"  # Devnet USDC mint
Update .env:
bash# Use Devnet RPC
ANCHOR_PROVIDER_URL=https://api.devnet.solana.com
# Or use free RPC services
# ANCHOR_PROVIDER_URL=https://rpc.ankr.com/solana_devnet

ANCHOR_WALLET=~/.config/solana/id.json
JUPITER_API_URL=https://quote-api.jup.ag/v6
NETWORK=devnet
Update Frontend (web/src/App.tsx):
typescript// Set network to Devnet
const connection = new Connection(
  'https://api.devnet.solana.com',
  'confirmed'
);

// Use WalletAdapterNetwork
import { WalletAdapterNetwork } from '@solana/wallet-adapter-base';

const network = WalletAdapterNetwork.Devnet;

Testing Jupiter on Devnet
Important: Jupiter Devnet Limitations
Jupiter Quote API works on Devnet BUT:

‚ö†Ô∏è Fewer tokens available
‚ö†Ô∏è Lower liquidity (test tokens)
‚ö†Ô∏è Some routes might not exist

Solution: Test with supported pairs
typescript// Test with these pairs on Devnet
const DEVNET_TEST_PAIRS = [
  { from: 'SOL', to: 'USDC' },    // ‚úÖ Works
  { from: 'USDC', to: 'SOL' },    // ‚úÖ Works
  { from: 'USDC', to: 'USDT' },   // ‚úÖ Works (if pool exists)
];

// Get Jupiter quote on Devnet
const quote = await jupiterQuoteApi.quoteGet({
  inputMint: DEVNET_TOKENS.USDC.mint,
  outputMint: DEVNET_TOKENS.SOL.mint,
  amount: 1000000, // 1 USDC
  slippageBps: 100,
});
If quote fails:
typescript// Fallback: Mock quotes for testing
if (network === 'devnet') {
  // Use mock price for testing privacy flow
  const mockQuote = {
    outAmount: '1847000', // ~1.847 SOL per 1000 USDC
    priceImpactPct: '0.05',
  };
}

Testing Arcium MPC on Devnet
Arcium Devnet Configuration:
rust// In your program (lib.rs)

// Arcium will provide Devnet endpoint
// Check their docs for current Devnet cluster

#[cfg(feature = "devnet")]
pub const ARCIUM_MPC_ENDPOINT: &str = "https://devnet.arcium.network";

#[cfg(feature = "mainnet")]
pub const ARCIUM_MPC_ENDPOINT: &str = "https://mainnet.arcium.network";
Check Arcium docs:
bash# See if they have Devnet support
# https://docs.arcium.com/
If Arcium doesn't have Devnet:
You can simulate MPC locally for testing:
rust// Add a test-only instruction
#[cfg(feature = "test")]
pub fn simulate_mpc_match(
    ctx: Context<SimulateMPCMatch>,
    from_token_id: u64,
    to_token_id: u64,
    amount: u64,
) -> Result<()> {
    // Simulate what Arcium MPC would return
    // Skip encryption, just test the flow
    
    let settlement = &mut ctx.accounts.settlement;
    settlement.from_token_id = from_token_id;
    settlement.to_token_id = to_token_id;
    settlement.amount_in = amount;
    settlement.is_active = true;
    
    emit!(OrderSettledEvent {
        nonce: settlement.nonce,
        from_token_id,
        to_token_id,
        amount_in: amount,
    });
    
    Ok(())
}
Then in tests:
typescript// Instead of waiting for Arcium callback
await program.methods
  .simulateMpcMatch(fromTokenId, toTokenId, amount)
  .rpc();

Complete Devnet Test Flow
End-to-End Test Script:
typescript// test-devnet.ts

import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { PublicKey } from '@solana/web3.js';
import { createJupiterApiClient } from '@jup-ag/api';

const DEVNET_USDC = new PublicKey('4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU');
const DEVNET_SOL = new PublicKey('So11111111111111111111111111111111111111112');

async function testDevnetFlow() {
  // 1. Setup
  const provider = anchor.AnchorProvider.env();
  anchor.setProvider(provider);
  const program = anchor.workspace.Dex as Program<Dex>;
  
  console.log('üîß Testing on Devnet...');
  console.log('Wallet:', provider.wallet.publicKey.toString());
  
  // 2. Airdrop Devnet SOL
  console.log('üí∞ Requesting Devnet SOL...');
  const airdropSig = await provider.connection.requestAirdrop(
    provider.wallet.publicKey,
    2 * anchor.web3.LAMPORTS_PER_SOL
  );
  await provider.connection.confirmTransaction(airdropSig);
  console.log('‚úÖ Received 2 SOL');
  
  // 3. Register tokens
  console.log('üìù Registering tokens...');
  await program.methods
    .registerToken(1, DEVNET_USDC)
    .rpc();
  await program.methods
    .registerToken(2, DEVNET_SOL)
    .rpc();
  console.log('‚úÖ Tokens registered');
  
  // 4. Create private swap
  console.log('üîí Creating private swap...');
  const nonce = Date.now();
  const [tempWalletPda] = PublicKey.findProgramAddressSync(
    [
      Buffer.from('temp_wallet'),
      provider.wallet.publicKey.toBuffer(),
      new anchor.BN(nonce).toArrayLike(Buffer, 'le', 8),
    ],
    program.programId
  );
  
  await program.methods
    .createPrivateSwap(
      1, // USDC
      2, // SOL
      DEVNET_USDC,
      DEVNET_SOL,
      new anchor.BN(1000000), // 1 USDC
      new anchor.BN(0),
      new anchor.BN(nonce)
    )
    .rpc();
  
  console.log('‚úÖ Temp wallet created:', tempWalletPda.toString());
  console.log('üíµ Send 1 USDC to temp wallet to continue...');
  
  // 5. Get Jupiter quote (Devnet)
  console.log('üîç Getting Jupiter quote on Devnet...');
  const jupiterApi = createJupiterApiClient();
  
  try {
    const quote = await jupiterApi.quoteGet({
      inputMint: DEVNET_USDC.toString(),
      outputMint: DEVNET_SOL.toString(),
      amount: 1000000,
      slippageBps: 100,
    });
    console.log('‚úÖ Quote:', quote.outAmount, 'lamports');
  } catch (error) {
    console.log('‚ö†Ô∏è  Jupiter Devnet quote failed (expected)');
    console.log('   Using mock quote for testing...');
  }
  
  // 6. Simulate MPC match (if Arcium Devnet unavailable)
  console.log('üß™ Simulating MPC match...');
  await program.methods
    .simulateMatchOrder(nonce, 1, 2)
    .rpc();
  console.log('‚úÖ Settlement created');
  
  // 7. Execute swap
  console.log('üí± Executing swap...');
  // Note: Might fail if Jupiter route doesn't exist on Devnet
  // That's OK - privacy mechanism still testable
  
  console.log('‚úÖ Devnet test complete!');
}

testDevnetFlow().catch(console.error);
